<div fxLayout="column" style="min-height: 100%">
  <div fxLayout="row" style="width: 100%; min-height: 64px;" class="padding-16">
    <div fxFlex="50%" class="page-title" fxLayout="row wrap" fxLayoutAlign="start center">
      {{'toDoListScreen.title' | translate}}
    </div>
        <div fxFlex="60%" fxFlex.lt-md="100%">
          <mat-paginator [disabled]="loading" [length]="paginatorProps.length" [pageSize]="paginatorProps.pageSize"
            [pageSizeOptions]="paginatorProps.pageSizeOptions" [showFirstLastButtons]="paginatorProps.showFirstLastButtons"
            [pageIndex]="paginatorProps.pageIndex" (page)="onPaginatorChange($event)">
          </mat-paginator>
        </div>  
  </div>

  <div class="border-bottom-gray" fxLayout="row wrap" fxLayoutAlign="start center" style="overflow-x: auto">
    <table mat-table [dataSource]="toDoList" class="table-min-100" #todolistTable>
      <ng-container matColumnDef="number">
        <th mat-header-cell *matHeaderCellDef class="font-th th-width-25"> 
          {{'table.numbers' | translate}} </th>
        <td mat-cell *matCellDef="let element; let i = index">
          {{paginatorProps.pageSize * paginatorProps.pageIndex + i + 1}}
        </td>
      </ng-container>

      <ng-container matColumnDef="jenisva">
        <th mat-header-cell *matHeaderCellDef class="font-th th-min-width">
          {{'table.jenisva' | translate}} </th>
        <td mat-cell *matCellDef="let element">
          {{element.vamaster_name}}
        </td>
      </ng-container>

      <ng-container matColumnDef="tanggalpengajuan">
        <th mat-header-cell *matHeaderCellDef class="font-th th-min-width text-center-important">
          {{'table.subdate' | translate}} </th>
        <td mat-cell *matCellDef="let element">
          {{element.date_submit}}
        </td>
      </ng-container>

      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef class="font-th  th-min-width text-center-important">
          {{'table.amount' | translate}} </th>
          <td mat-cell *matCellDef="let element"> 
            {{element.will_cashout | currency:'IDR':'symbol-narrow':'1.2-2': locale}}
          </td>
      </ng-container>

      <ng-container matColumnDef="initiator">
        <th mat-header-cell *matHeaderCellDef class="font-th  th-min-width-150">
          {{'table.initiator' | translate}} </th>
        <td mat-cell *matCellDef="let element">
          {{element.initiator}}
        </td>
      </ng-container>
      
      <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="font-th  th-min-width text-center-important">
            {{'table.actions' | translate}} </th>
          <td mat-cell *matCellDef="let element" [class.text-center]="!element.status || element.status === ''">
            <div *ngIf="allowPublish" class="padding-top-10 padding-bottom-10 success-error-theme">
              <div style="width: 100%">
                <button block-button mat-raised-button color="primary"
                  (click)="approveSpecialOffer(element)">{{'approve' | translate}}</button>
              </div>
              <div style="width: 100%" class="margin-top-5">
                <button block-button mat-raised-button color="accent"
                  (click)="rejectSpecialOffer(element)">{{'reject' | translate}}</button>
              </div>
            </div>
            <div *ngIf="!allowPublish" class="padding-top-10 padding-bottom-10">
              <div style="width: 100%">
                <button block-button mat-raised-button disabled>{{'approve' | translate}}</button>
              </div>
              <div style="width: 100%" class="margin-top-5">
                <button block-button mat-raised-button disabled>{{'reject' | translate}}</button>
              </div>
            </div>
          </td>
      </ng-container>
      <tr class="bg-light-gray" mat-header-row *matHeaderRowDef="todoListColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: todoListColumns;" [hidden]="loading"></tr>
    </table>
  </div>

  <div fxFlex="grow" style="min-height:100px" fxLayout="row wrap" fxLayoutAlign="center center" *ngIf="loading">
    <div fxLayout="row" fxFlex="100%" fxLayoutAlign="center center">
      <mat-spinner diameter="50"></mat-spinner>
    </div>
    <div fxLayout="row" fxFlex="100%" fxLayoutAlign="center center" class="margin-top-10 font-title">
      {{'loading' | translate}}...
    </div>
  </div>
  <div fxLayout="row wrap" fxLayoutAlign="start center" class="margin-top-10 padding-left-16"
    *ngIf="toDoList.length === 0 && !loading">
    <div class="font-gotham-light">
      {{'table.noRecordsFound' | translate}}
    </div>
  </div>
</div>