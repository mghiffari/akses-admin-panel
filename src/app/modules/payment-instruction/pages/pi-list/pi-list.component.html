<div fxLayout="column" style="min-height: 100%">
  <div fxLayout="row" style="width: 100%; min-height: 64px;" class="padding-16">
    <div fxFlex="100%" class="page-title" fxLayout="row wrap" fxLayoutAlign="start center">
      {{'paymentInstructionScreen.title' | translate}}
    </div>
  </div>
  <div fxLayout="row wrap" fxLayoutAlign="start start">
    <div fxFlex="100%">
      <mat-tab-group animationDuration="500ms" (selectedIndexChange)="onChangeTabIndex($event)"
        [(selectedIndex)]="selectedIndex" #tabs>
        <mat-tab *ngFor="let type of paymentTypes" [label]="type.name" [disabled]="loading">
          <ng-template matTabContent style="min-height: 100%">
            <div fxLayout="row wrap" style="width: 100%" fxLayoutAlign="start center" class="padding-16">
              <div fxFlex="100%">
                <a [routerLink]="['/payment-instructions/create/', type.name]" class="top-action-text"
                  fxLayoutAlign="start center">
                  <mat-icon class="font-description-icon margin-right-10">add</mat-icon>
                  <span>
                    {{'paymentInstructionScreen.createInstruction' | translate}}
                  </span>
                </a>
              </div>
            </div>
            <div class="border-bottom-gray" fxLayout="row wrap" fxLayoutAlign="start center" style="overflow-x: auto">
              <table mat-table [dataSource]="data" class="table-min-100" #table>
                <ng-container matColumnDef="orderButton">
                  <th mat-header-cell *matHeaderCellDef class="font-th th-width-25"> </th>
                  <td mat-cell *matCellDef="let element; let i = index" class="text-center">
                    <div>
                      <span *ngIf="i === 0">
                        <mat-icon class="cursor-pointer text-medium-gray">
                          keyboard_arrow_up
                        </mat-icon>
                      </span>
                      <span *ngIf="i !== 0">
                        <mat-icon class="cursor-pointer text-purple" (click)="onOrderUp(i)">
                          keyboard_arrow_up
                        </mat-icon>
                      </span>
                    </div>
                    <div>
                      <span *ngIf="i === (data.length-1)">
                        <mat-icon class="cursor-pointer text-medium-gray">
                          keyboard_arrow_down
                        </mat-icon>
                      </span>
                      <span *ngIf="i !== (data.length-1)">
                        <mat-icon class="cursor-pointer text-purple" (click)="onOrderDown(i)">
                          keyboard_arrow_down
                        </mat-icon>
                      </span>
                    </div>
                  </td>
                </ng-container>
                <ng-container matColumnDef="order">
                  <th mat-header-cell *matHeaderCellDef class="font-th th-width-25 text-center-important">
                    {{'table.order' | translate}}
                  </th>
                  <td mat-cell *matCellDef="let element; let i = index" class="text-right">
                    {{i + 1}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="title">
                  <th mat-header-cell *matHeaderCellDef class="font-th th-min-width text-center-important">
                    {{'table.title' | translate}}
                  </th>
                  <td mat-cell *matCellDef="let element; let i = index">
                    {{element.grp_title}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="lastUpdated">
                  <th mat-header-cell *matHeaderCellDef class="font-th  th-min-width-50 text-center-important">
                    {{'table.lastUpdated' | translate}} </th>
                  <td mat-cell *matCellDef="let element">
                    <span *ngIf="element.modified_dt && element.modified_by; else created">
                      {{element.modified_dt | date : 'dd/MM/yyyy HH:mm'}} {{'by' | translate}} {{element.modified_by}}
                    </span>
                    <ng-template #created>
                      {{element.created_dt | date : 'dd/MM/yyyy HH:mm'}} {{'by' | translate}} {{element.created_by}}
                    </ng-template>
                  </td>
                </ng-container>
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef class="font-th  th-min-width-50 text-center-important">
                    {{'table.actions' | translate}}
                  </th>
                  <td mat-cell *matCellDef="let element" class="text-center">
                    <mat-icon class="cursor-pointer" (click)="onDelete(element)">delete</mat-icon>
                    <mat-icon color="primary" class="cursor-pointer"
                      [routerLink]="['/payment-instructions/update', element.id]">
                      edit
                    </mat-icon>
                  </td>
                </ng-container>
                <tr class="bg-light-gray" mat-header-row *matHeaderRowDef="tableColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: tableColumns;" [hidden]="loading"></tr>
              </table>
            </div>
          </ng-template>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
  <div fxFlex="grow" style="min-height:100px" fxLayout="row wrap" fxLayoutAlign="center center" *ngIf="loading">
    <div fxLayout="row" fxFlex="100%" fxLayoutAlign="center center">
      <mat-spinner diameter="50"></mat-spinner>
    </div>
    <div fxLayout="row" fxFlex="100%" fxLayoutAlign="center center" class="margin-top-10 font-title">
      {{'loading' | translate}}...
    </div>
  </div>
  <div fxLayout="row wrap" fxLayoutAlign="start center" class="margin-top-10 padding-left-16"
    *ngIf="data.length === 0 && !loading">
    <div class="font-gotham-light">
      {{'table.noRecordsFound' | translate}}
    </div>
  </div>
</div>