<div fxLayout="column" style="min-height: 100%">
  <div fxLayout="row" style="width: 100%; min-height: 64px;" class="padding-16">
    <div fxFlex="50%" class="page-title" fxLayout="row wrap" fxLayoutAlign="start center">
      {{'balanceReport.title' | translate}}
    </div>
  </div>
  <div fxLayout="row" style="width: 100%; min-height: 64px;" class="padding-16">
    <div fxFlex="100%" fxLayout="row wrap" fxLayoutAlign="start center">
      <div fxFlex="40%" fxFlex.lt-lg="60%" fxFlex.lt-md="80%" fxFlex.lt-sm="100%">
        <mat-form-field appearance="fill" class="font-description search-right">
          <input #searchInput matInput [(ngModel)]="search"
            placeholder="{{'forms.transactionSearch.placeholder' | translate}}" [disabled]="loading" (focus)="isFocusedInput = true"
            (blur)="isFocusedInput = false" (keyup)="isSearchValid($event) && onSearch()">
          <mat-icon matSuffix [class.search-disabled]="!isSearchValid()">search</mat-icon>
        </mat-form-field>
        <mat-hint class="bottom-hint no-padding">
          {{'forms.transactionSearch.hint' | translate : searchValidation}}
        </mat-hint>
      </div>
    </div>
  </div>
  <div class="border-bottom-gray margin-16 table-border" fxLayout="row wrap" fxLayoutAlign="start start" style="min-height: 100px">
    <table mat-table [dataSource]="balanceData" class="table-min-100" #balanceTable>
      <ng-container matColumnDef="oid">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-width-25">
          {{'table.transactionTable.oid' | translate}} </th>
        <td mat-cell *matCellDef="let element;">
          {{element.oid}}
        </td>
      </ng-container>
      <ng-container matColumnDef="vaNumber">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-min-width-50">
          {{'table.transactionTable.vaNumber' | translate}} </th>
        <td mat-cell *matCellDef="let element">
          {{element.vaNumber}}
        </td>
      </ng-container>
      <ng-container matColumnDef="name">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-min-width-150">
          {{'table.transactionTable.name' | translate}} </th>
        <td mat-cell *matCellDef="let element"> {{element.firstname}} {{element.lastname}} </td>
      </ng-container>
      <ng-container matColumnDef="phoneNumber">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-min-width-50">
          {{'table.transactionTable.phNumber' | translate}} </th>
        <td mat-cell *matCellDef="let element"> {{element.mobileNumber}} </td>
      </ng-container>
      <ng-container matColumnDef="aksesPayBalance">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-min-width-50">
          {{'table.transactionTable.aksesPay' | translate}} </th>
        <td mat-cell *matCellDef="let element"> {{element.vaBalance}} </td>
      </ng-container>
      <ng-container matColumnDef="timestamp">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-min-width-50">
          {{'table.transactionTable.timestamp' | translate}} </th>
        <td mat-cell *matCellDef="let element"> {{element.timestamp | date: 'dd/MM/yyyy'}} </td>
      </ng-container>
      <tr class="bg-gray" mat-header-row *matHeaderRowDef="balanceColumn; sticky: true"></tr>
      <tr mat-row class="bg-light-gray" *matRowDef="let row; columns: balanceColumn;" [hidden]="loading"></tr>
    </table>
    <div fxLayout="row wrap" fxLayoutAlign="start center" class="margin-top-10 padding-left-16"
      *ngIf="(balanceData.length === 0 || balanceData === 0) && !loading">
      <div class="font-gotham-light">
        {{'table.noRecordsFound' | translate}}
      </div>
    </div>
    <div fxFlex="grow" class="margin-16" style="min-height:100px" fxLayout="row wrap" fxLayoutAlign="center center" *ngIf="loading">
      <div fxLayout="row" fxFlex="100%" fxLayoutAlign="center center">
        <mat-spinner diameter="50"></mat-spinner>
      </div>
      <div fxLayout="row" fxFlex="100%" fxLayoutAlign="center center" class="margin-top-10 font-title">
        {{'loading' | translate}}...
      </div>
    </div>
  </div>

  <div class="border-bottom-gray margin-16 table-border" fxLayout="row wrap" fxLayoutAlign="start start" style="height: 493px;">
    <table mat-table [dataSource]="transData" class="table-min-100" #balanceTable>
      <ng-container matColumnDef="transCode">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-width-25"> 
          {{'table.transactionTable.transCode' | translate}} </th>
        <td mat-cell *matCellDef="let element;">
          {{element.fund_trx_code}}
        </td>
      </ng-container>
      <ng-container matColumnDef="transDesc">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-min-width-50">
          {{'table.transactionTable.transDesc' | translate}} </th>
        <td mat-cell *matCellDef="let element">
          {{element.transaction_type}}
        </td>
      </ng-container>
      <ng-container matColumnDef="amount">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-min-width-150">
          {{'table.transactionTable.amount' | translate}} </th>
        <td mat-cell *matCellDef="let element"> {{element.fund_amt_va}} </td>
      </ng-container>
      <ng-container matColumnDef="VANumberDest">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-min-width-50">
          {{'table.transactionTable.destVANumber' | translate}} </th>
        <td mat-cell *matCellDef="let element"> {{element.fund_dest_va_no}} </td>
      </ng-container>
      <ng-container matColumnDef="sourceVANumber">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-min-width-50">
          {{'table.transactionTable.sourceVANumber' | translate}} </th>
        <td mat-cell *matCellDef="let element"> {{element.fund_init_va_no}} </td>
      </ng-container>
      <ng-container matColumnDef="transDate">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-min-width-50">
          {{'table.transactionTable.transDate' | translate}} </th>
        <td mat-cell *matCellDef="let element"> {{element.fund_trx_date | date: 'dd/MM/yyyy' }} </td>
      </ng-container>
      <ng-container matColumnDef="transSequence">
        <th mat-header-cell style="text-align: left !important;" *matHeaderCellDef class="font-th th-min-width-50">
          {{'table.transactionTable.transSeq' | translate}} </th>
        <td mat-cell *matCellDef="let element"> {{element.fund_trx_sequences}} </td>
      </ng-container>
      <tr class="bg-gray" mat-header-row *matHeaderRowDef="transactionColumn; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: transactionColumn;" [hidden]="loading"></tr>
    </table>
    <div fxFlex="grow" style="min-height:100px" fxLayout="row wrap" fxLayoutAlign="center start" *ngIf="loading">
      <div fxLayout="row" fxFlex="100%" fxLayoutAlign="center center">
        <mat-spinner diameter="50"></mat-spinner>
      </div>
      <div fxLayout="row" fxFlex="100%" fxLayoutAlign="center center" class="margin-top-10 font-title">
        {{'loading' | translate}}...
      </div>
    </div>
    <div>
      <div fxLayout="row wrap" fxLayoutAlign="start start" class="margin-top-10 padding-left-16"
        *ngIf="(transData.length === 0 || transData === 0) && !loading">
        <div class="font-gotham-light">
          {{'table.noRecordsFound' | translate}}
        </div>
      </div>
    </div>
  </div>
</div>